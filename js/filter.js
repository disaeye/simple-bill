const FilterModule=function(){let e={dimension:"month",billingDay:"1",periodValue:"",category:"",tableFilters:{types:[],category1:[],category2:[]}};function t(){const t=new CustomEvent("filterChange",{detail:e});document.dispatchEvent(t)}return{getState:function(){return{...e}},setDimension:function(n){e.dimension=n,t()},setBillingDay:function(n){e.billingDay=n,t()},setPeriodValue:function(n){e.periodValue=n,t()},setCategory:function(n){e.category=n||"",t()},setTableFilters:function(t){e.tableFilters={...t}},initFromUI:function(t){t.dimension&&(e.dimension=t.dimension.value||"month"),t.billingDay&&(e.billingDay=t.billingDay.value||"1"),t.periodSelect&&(e.periodValue=t.periodSelect.value||""),t.categoryFilter&&(e.category=t.categoryFilter.value||"")},syncCategoryFromDrillDown:function(n){e.category=n;const i=document.getElementById("categoryFilter");i&&(i.value=n);const l=document.getElementById("categoryDropdownText");l&&(l.textContent=n),t()},clearCategoryFilter:function(){e.category="";const n=document.getElementById("categoryFilter");n&&(n.value=""),t()},applyFilters:function(t,n){let i=[...t];if(e.periodValue&&"all"!==e.dimension){const t=n.calculatePeriodByDimension(e.dimension,e.periodValue,e.billingDay);t&&(i=n.filterByDateRange(i,t.start,t.end))}return e.category&&(i=i.filter(t=>t.category1===e.category)),e.tableFilters.types&&e.tableFilters.types.length>0&&(i=i.filter(t=>{const n=t.type||"expense";return e.tableFilters.types.includes(n)})),e.tableFilters.category1&&e.tableFilters.category1.length>0&&(i=i.filter(t=>e.tableFilters.category1.includes(t.category1))),e.tableFilters.category2&&e.tableFilters.category2.length>0&&(i=i.filter(t=>{const n=t.category2||"";return e.tableFilters.category2.includes(n)})),i},getTrendData:function(t,n){let i=t;return e.category&&(i=t.filter(t=>t.category1===e.category)),n.getTrendStats(i,e.dimension)},triggerFilterChange:t}}();